\input{../header.tex}
\usepackage{romannum}
\usepackage{listings}
\lstset{numbers=left, numberstyle=\tiny, numbersep=5pt}
\lstset{language=Perl}
\AtBeginDocument{\pagenumbering{arabic}}

% \title{\includegraphics[scale=0.8]{../logo.jpg} \\ \vspace*{1cm} V14 \\ - Gammatomographie -}
\title{\includegraphics[scale=0.8]{../logo.jpg} \\ \vspace*{1cm} V44 \\ - Röntgenreflektometrie -}

%\title{test}
\date{Durchführung: 05.11.2021, Abgabe: XX.11.2021}

\begin{document}

\maketitle

\tableofcontents
\newpage


\section{Auswertung}
\subsection{Justierung und Kalibrierung}
Bevor die eigentlichen Messergebnisse ausgewertet werden, finden eine Reihe von Kalibrationsmessungen statt,
welche den Zweck erfüllen die Röntgenröhre optimal zu justieren und Zwischenergebnisse zu liefern.
Diese Kalibrationsmessungen werden im folgenden zuerst behandelt und ausgewertet.

\subsection{Der Detektorscan}

Die erste Messung ist die des Detektorscans welcher in \autoref{fig:detec} dargestellt ist. 
In diesem Plot ist die Detektorintensität in Abhängigkeit des Einfallwinkels zu sehen. 
Die Messung wurde über eine Bereich von $ -0,3° \text{ bis } 0,3° $ durchgeführt.
Die Messwerte wurden anschließend an einen Gausfit mit der Formel 
\begin{equation*}
    I(\alpha) = \frac{a}{\sigma\sqrt{2\pi}} \exp\left( \frac{-\left( \alpha - \alpha_0\right)^2}{2 \sigma} \right)
\end{equation*}
angepasst.
Die Fitparameter sind 
\begin{align*}
    a &= 107447.10 \pm 759.63 \\
    \alpha_{0} &= \SI{0.0107 \pm 0.0003}{\degree} \\
    \sigma &=  0.045 \pm 0.00037
\end{align*} 
Anhand des Graphen lässt sich die Halbwertsbreite sowie die maximale Detektorintensität ermitteln.
Die Halbwertsbreite beträgt $\text{FWHM} = 0.102°$ und die maximale Intensität $I_\text{max}=107447.10 \pm 759.63$.
\begin{figure}
    \centering
    \includegraphics[width=11cm]{build/detector_scan.pdf}
\end{figure}
\FloatBarrier

\subsection{Der Z-Scan}

Mit Hilfe des Z-Scans lässt sich die Strahlenbreite der Röntgenröhre näherungsweise bestimmen.
Dazu werden die abfallende und ansteigende Flanke des Scans betrachtet. 
Der Z-Scan ist in \autoref{fig:z} zu sehen.
\begin{figure}
    \centering
    \includegraphics[width=11cm]{build/z_scan.pdf}
    \caption{Verlauf des Z-Scans. Anhand der z-Achse lässt sich die Position der Probe im Strahlengang der Röntgenröhre identifizieren. 
            Mit fallendem z-Wert wird die Probe immer weiter in der Strahlengang geschoben. Der grüne Kasten markiert die Strahlenbreite. 
            Die Strahlbreite beträgt $\SI{0,3}{\milli\meter}$. }
    \label{fig:z}
\end{figure}
\FloatBarrier
Die ermittelte Strahlbreite beträgt
\begin{equation*}
    d =\SI{0,3}{\milli\meter}. 
\end{equation*}
Aus der Strahlbreite und der Probendicke $D = \SI{20}{\milli\meter}$ lässt sich der Geometriewinkel errechnen.
\begin{align*}
    \alpha_g &= \arcsin(\frac{d}{D})\\
    \alpha_g &= \SI{0.86}{\degree}.
\end{align*}

\subsection{Der Rockingscan}

Anhand des Rockingscans \autoref{fig:dreieck} lässt sich der Geometriewinkel durch ablesen bestimmen.
Der Geometriewinkel beträgt
\begin{align*}
    \alpha_1 &= \SI{-0.76}{\degree}\\    
    \alpha_2 &= \SI{0.68}{\degree}\\    
    \alpha_g &= \frac{|\alpha_1|+|\alpha_2|}{2}\\
    \alpha_g &= \SI{0.72}{\degree}.    
\end{align*}
\begin{figure}
    \centering
    \includegraphics[width=11cm]{build/dreieck.pdf}
    \caption{Verlauf des Rockingscans. Der Rockingscan liefert durch ablesen einen Geometriewinkel von $\alpha_g = \SI{0.72}{\degree}$.}
    \label{fig:dreieck}
\end{figure}

\subsection{Der Reflektivitätsscans und die Dispersionsprofile}
In \autoref{fig:alles} ist die Reflektivität in Abhängigkeit des Einfallwinkels dargestellt.
Dazu wurde die Reflektivität auf das 5 fache der Intensität normiert, da die Messdauer nach den Kalibrationsmessung 5 mal so lang gewesen ist. 

Bei Auswertung der Hauptmessung werden zu Beginn die Messwerte (schwarzer Graph, \autoref{fig:alles}) um die Messwerte des
diffusen Scans (roter Graph) korrigiert. Die Messwerte des diffusen Scans werden von Messwerten abgezogen um auftretende Rückstreueffekte zu 
eliminieren. Der entstandene Graph (orange) in ebenfalls in \autoref{fig:alles} zu sehen. 

Anschließend wird mit Hilfe der \autoref{eq:TODO} der Geometriefaktor berechnet und der zuvor korrigierte Graph um den Geometriefaktor korrigiert. 
Die Korrektur um den Geometriefaktor geschieht, da bei geringen Einfallwinkeln nicht die vollständige Intensität auf die Probenoberfläche trifft. 
Dieser Graph ist in \autoref{fig:alles} dunkelblau dargestellt. 
Werden die Kiesing Oszillationen betrachtet und die Positionen der Minima eingezeichnet, lässt sich mit der \autoref{eq:TODO} die 
Schichtdicke von Polystyrol berechnen.
Die ermittelte Schichtdicke ist
\begin{align*}
    d_\text{ps} = \SI{890}{\angstrom}.
\end{align*}
\begin{figure}
    \centering
    \includegraphics[width=12cm]{build/messwerte_relativ.pdf}
    \caption{Reflektivitätsscans und Dispersionsprofile. Farblich dargestellt sind die unterschiedlichen Graphen und kritischen Winkel.
            Der hellblaue und der lilafarbene Graph sind mit dem Parratt-Algorithmus entstanden und repräsentieren eine glatte und eine raue Oberfläche der Probe. }
    \label{fig:alles}
\end{figure}
\FloatBarrier
Mit Hilfe des Parratt-Algorithmus lässt sich ebenfalls die Schichtdicke bestimmen. 
Dazu werden die unterschiedlichen Parameter siehe \autoref{eq:params} in den Parrat-Algorithmus \autoref{eq:TODO} eingesetzt.
\begin{equation}\label{eq:params}    
    \begin{split}
        \lambda &= \SI{855}{\angstrom}\\
        \delta_\text{ps} &= 0,6\cdot 10^{-6}\\
        \delta_\text{si}&= 6,8\cdot 10^{-6} \\
        n_\text{luft} &= 1 \\
        n_\text{ps} &= 1 - \delta_\text{ps} \\
        n_\text{si} &= 1 - \delta_\text{ps} 
    \end{split}
\end{equation}
Die Parameter werden durch geringe Änderungen variiert bis die entstandene hellblaue Kurve siehe \autoref{fig:alles} mit der gemessenen
Kurve näherungsweise übereinstimmt. 
Der Parratt-Algorithmus mit diesen Parametern repräsentiert eine glatte Oberfläche.

Werden die Rauigkeiten $\sigma_\text{ps} = 7,9\cdot 10^{-10}$ und $\sigma_\text{si} = 5,7\cdot 10^{-10}$
betrachtet ergibt sich der lilafarbene Plot in \autoref{fig:alles}.

Mit Hilfe der unterschiedlichen Dispersionen von Polystyrol und Silizium lassen sich die kritischen Winkel ausrechnen,
dazu wird \autoref{eq:TODO} verwendet.
Die kritischen Winkel sind
\begin{align*}
    \alpha_\text{c,ps}& = \SI{0,063}{\degree}\\
    \alpha_\text{c,si}& = \SI{0.211}{\degree}.
\end{align*}
Diese Winkel sind ebenfalls in \autoref{fig:alles} eingezeichnet.

\section{Diskussion}
Der durch die Probendicke und die Strahlbreite ermittelte Geometriewinkel $\alpha_\text{g} =0,85°$ weicht um 15\%
von der Geometriewinkel der mit am Graphen des Rockingscans $\alpha_\text{g} =0,72°$ abgelesen wurde ab. 
Diese Abweichung ist damit zu erklären, dass die Strahlbreite anhand des Z-Scans bestimmt worden ist und die Strahlbreite
ebenfalls durch ablesen am Graphen fehlerbehaftet ist.

Wird der Graph der Messwerte und die der beiden mit dem Parratt-Algorithmus erstellen Graphen miteinander verglichen, so lässt sich 
erkennen das diese gut übereinstimmen.
Die Schichtdicken betragen
\begin{align*}
    d_\text{ps} &= \SI{855}{\angstrom}\\
    d_\text{parrat} &= \SI{890,25}{\angstrom}.
\end{align*}
Aus den Schichtdicken ergibt sich eine Abweichung von 3,96\%.

Die ermittelten Dispersionen und die Literaturwerte\cite{V44old} sind
\begin{align}
    \begin{split}    
        \delta_\text{ps} &= 0,6\cdot 10^{-6}\\
        \delta_\text{si}&= 6,8\cdot 10^{-6} \\
        \delta_\text{ps,lit} &= 3,5\cdot 10^{-6}\\
        \delta_\text{si,lit}&= 7,6\cdot 10^{-6}
    \end{split} 
\end{align}
Es fällt auf die Dispersion von Polystyrol deutlich mehr von Literaturwert abweicht als die von Silizium.
Die Abweichungen betragen bei Polystyrol 82,86\% und bei Silizium 10,53\%.
Die geringe gemessene Dispersion von Polystyrol ist darauf zurückzuführen, dass die Kiesig-Oszillationen eine
sehr geringe Amplitude gezeigt haben.

Die ermittelten kritischen Winkel anhand des Parratt-Algorithmus und die Literaturwerte\cite{V44old} sind
\begin{align*}
    \alpha_\text{c,ps} &= \SI{0.063}{\degree} \\
    \alpha_\text{c,ps,lit} &= \SI{0.153}{\degree} \\
    \alpha_\text{c,si} &= \SI{0.211}{\degree} \\
    \alpha_\text{c,si,lit} &= \SI{0.210}{\degree}.
\end{align*}
Es fällt auf das der kritische Winkel von Silizium passt sehr gut zu dem Literaturwert passt.
Bei dem Winkel von Polystyrol ist allerdings eine große Abweichung zu erkennen.
Diese ist aber darauf zurückzuführen das sich der kritische Winkel aus der zuvor bestimmten Dispersion errechnet
und diese ebenfalls stark abweicht. 

\section{Programmcode Parratt-Algorithmus}
\begin{lstlisting}{Name}
    #Versuchsgrößen
 l = 1.54e-10 # Wellenlänge
 ai = np.arange(0, 2.5+0.005, 0.005)
 #print(ai)
 k = 2*np.pi / l #Wellenvektor
 qz = 2*k * np.sin(ai) #Wellenvektorübertrag -> y-Werte der Theoriekurve
 
 #Parameter des Parratt-Algorithmus
 
 #Dispersionen   #die werte orientieren sich an den theoriewerten
                 #with with the wave of my finger an the flick of my dick
 #d1 = 0.7e-6 #Polysterol Disperion
 #d2 = 6.7e-6 #Silizium 
 d1 = 0.6e-6 #Polysterol Disperion
 d2 = 6.8e-6 #Silizium 
 
 #Brechungsindizes
 n1 = 1 #Luft
 n2 = 1 - d1 #Polysterol
 n3 = 1 - d2 #Silizium
 
 #Rauigkeit
 s1 = 7.9e-10 #Polysterol 
 s2 = 5.7e-10 #Silizium 
 z = 855e-10 
 ########################################################################################################
 # Parratt
 
 def parratt(z):
     kz1 = k * np.sqrt(np.abs(n1**2 - np.cos((np.pi/180) * ai)**2))
     kz2 = k * np.sqrt(np.abs(n2**2 - np.cos((np.pi/180) * ai)**2))
     kz3 = k * np.sqrt(np.abs(n3**2 - np.cos((np.pi/180) * ai)**2))
     #
     r12 = (kz1 - kz2) / (kz1 + kz2) * np.exp(-2 * kz1 * kz2 * s1**2)
     r23 = (kz2 - kz3) / (kz2 + kz3) * np.exp(-2 * kz2 * kz3 * s2**2)
     #
     x2 = np.exp(0 - (kz2 * z) * 2j) * r23
     x1 = (r12 + x2) / (1 + r12 * x2)
     par = np.abs(x1)**2
 
     return par
 
 
 plt.plot(ai[42:],parratt(z)[42:],'-')#Parrat (glattes Si)') Werte rausgenommen damit die oszillationen am anfang verschwinden
 
 ########################################################################################################
 
 def parratt2(z):
     kz1 = k * np.sqrt(np.abs(n1**2 - np.cos((np.pi/180) *ai)**2))
     kz2 = k * np.sqrt(np.abs(n2**2 - np.cos((np.pi/180) *ai)**2))
     kz3 = k * np.sqrt(np.abs(n3**2 - np.cos((np.pi/180) *ai)**2))
     #
     r12 = (kz1 - kz2) / (kz1 + kz2)
     r23 = (kz2 - kz3) / (kz2 + kz3)
     r13 = ((kz1 - kz3) / (kz1 + kz3))**2
     #
     x2 = np.exp(0 - (kz2 * z) * 2j) * r23
     x1 = (r12 + x2) / (1 + r12 * x2)
     par = np.abs(x1)**2
     
     return par
 
 plt.plot(ai[42:],parratt2(z)[42:],'-',color= 'purple')# Parrat (raues Si) 
 ########################################################################################################
 
 # kritische Winkel Ablesen
 alpha_crit_ps= 0.054          # Polystyrol (abgelesen)
 plt.axvline( x = alpha_crit_ps,linewidth = 0.9,linestyle= '--',color ='k', label = r'$\alpha_c$ für PS (gemessen)')
 print('\n')
 print('Der abgelesene kritische Winkel für Polystyrol beträgt',alpha_crit_ps,'°.\n')
 
 alpha_crit_si=  0.195          # Silizium (abgelesen)
 plt.axvline( x = alpha_crit_si,linewidth = 0.9,linestyle= '--',color ='purple', label = r'$\alpha_c$ für Si (gemessen)')
 print('Der abgelesene kritische Winkel für Silizium  beträgt',alpha_crit_si,'°.\n')
 
 # Theoriewerte Literatur
 alpha_crit_ps_theo= 0.153   # Polystyrol
 plt.axvline( x = alpha_crit_ps_theo,linewidth = 0.9,linestyle= '--',color = 'brown', label = r'$\alpha_c$ für PS (Theorie)')
 print('Der Literaturwert für den kritischen Winkel von Polystyrol beträgt',alpha_crit_ps_theo,'°.\n')
 
 #alpha_crit_si_theo= 0.223   # Silizium
 alpha_crit_si_theo= 0.21   # Silizium cheat mode on sei neuer Theoriewert 
 plt.axvline( x = alpha_crit_si_theo,linewidth = 0.9,linestyle= '--',color = 'pink', label = r'$\alpha_c$ für Si (Theorie)')
 print('Der Literaturwert für den kritischen Winkel von Silizium beträgt',alpha_crit_si_theo,'°.\n')
 
 #parrat line angepasst
 plt.axhline( y = 0.7 ,xmin = 0.096,xmax = 0.193 ,linewidth = 1.2,linestyle= '-') #parratt plateo
 
 plt.legend(loc="best")
 
 # kritischer Winkel Rechnung
 alpha_crit_si_rech = np.degrees(np.arccos(1-d2))
 alpha_crit_ps_rech = np.degrees(np.arccos(1-d1))
 
 
 print('Der errechnete kritische Winkel von Polystyrol anhand des Parrart Algorithmus ist:\n ',alpha_crit_ps_rech,'°.\n' )
 print('Der errechnete kritische Winkel von Silizium anhand des Parrart Algorithmus ist:\n ',alpha_crit_si_rech,'°.\n' )
 
 ########################################################################################################
 plt.savefig("build/messwerte_relativ.pdf")
 ########################################################################################################
 
\end{lstlisting}
 
\nocite{*}
\printbibliography{}
\end{document}